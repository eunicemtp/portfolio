---
// Astro frontmatter
//src/pages/work/[slug].astro
import projets from '../../../data/projets.json';
import Layout from '../../../layouts/Layout.astro';
import Slugs from '../../../components/Slug.astro';
import { translations } from '../../../data/lang.js';

export async function getStaticPaths() {
  return projets.map((projet) => ({
    params: { slug: projet.slug }
  }));
}

type Lang = 'en' | 'fr';
const lang = 'fr'; // ou 'fr'
const { slug } = Astro.params;
const projet = projets.find((p) => p.slug === slug);

if (!projet) throw new Error(`Projet not found: ${slug}`);

const content = projet.i18n![lang] || projet.i18n!['en'];
if (!projet?.i18n) {
  throw new Error(`Missing translations (i18n) for project: ${slug}`);
}

const pageKey = content.nom;


const t = translations[lang];


---

<Layout title={content.nom} pageClass={`work-detail ${lang} ${pageKey}`}>
  <Slugs lang={lang}/>
</Layout>


